[//]: # (数据集管理)

[//]: # (=====)

## 一、关于数据集

AngusTester数据集管理模块旨在提供一个高效、灵活的方式来定义和管理一组相关的数据参数值。这些参数值通常代表实际的测试数据，例如用户数据、订单数据和账户数据等。通过定义数据集，用户可以方便地组织和引用各种测试数据，提高测试效率和准确性。

在使用AngusTester时，定义好数据集后，可以利用参数名占位符`{参数名}`来轻松引用相应的数据集参数。这种方法不仅简化了数据的管理，还使得测试脚本更具可读性和可维护性。用户可以根据需要灵活调整数据集内容，以适应不同的测试场景，从而实现高效的测试流程和更精准的测试结果。

***注意事项:***

- 确保在使用数据集前，已正确配置并定义了数据集。
- 数据集在执行采样前加载，在采样过程中动态改变参数值。

## 二、数据集信息

在AngusTester中，每个数据集包含以下字段信息：

- ID：每个执行的唯一标识符，创建数据集后自动分配。
- 项目ID：执行所属项目唯一标识符。
- 名称：数据集的名称。
- 描述：对数据集的详细描述，帮助其他用户理解数据集的用途。
- 参数：定义参数化数据集和值。具体提取配置参数请查看：“参数化”->“数据集”->“[数据集参数](https://www.xcan.cloud/help/doc/205509853639082016?c=248564029595844674)”。
- 提取规则：定义数据集提取的具体规则，指明是文件提取、Http提取还是Jdbc提取。具体提取配置参数请查看：“参数化”->“数据集”->“[数据集提取配置](https://www.xcan.cloud/help/doc/205509853639082016?c=248564029595844674)”。
- 创建人：创建该执行的用户。
- 创建时间：创建执行的时间。
- 最后修改人：最后修改该执行的用户。
- 最后修改时间：最后一次修改执行的时间。

## 三、数据集操作

AngusTester提供多种操作来管理数据集，具体操作及其说明如下：

### 1、添加静态数据集

添加一个静态数据集，即使用Mock函数和常量值定义一组值作为数据集。

操作步骤:

1. 登录AngusTester，进入“数据”->“数据集”管理界面。
2. 点击“添加静态数据集”按钮。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/dataset-static-add0.png?fid=251751417168003320&fpt=SuLYYHaZGgZQvuoicWXxwGOGtYk1eCDQOI1RNZOg)
3. 填写数据集名称、描述及参数信息。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/dataset-static-add.png?fid=251751417168003318&fpt=2Qt5v7qJ3dIYOhFlRgtgyjxFfqfurTsHv1Omzud3)
4. 可以在“预览”Tab页面中查看和调试参数值。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/dataset-static-view.png?fid=251751417168003322&fpt=C85UskJNnHm5pSgWES2KG5jRG1z16qJKPkd0UgZf)
5. 点击“保存”完成操作。

***注意事项：***

- 参数值在采样时根据Mock数据函数动态生成参数值。
- 每个数据集最大允许添加200个参数，最大支持生成1000亿行数据。

### 2、添加文件提取数据集

从指定文件中提取数据并创建数据集，即从一个文件中提取一组参数值作为数据集。

操作步骤:

1. 登录AngusTester，进入“数据”->“数据集”管理界面。
2. 点击添加静态数据集下拉操作中“文件提取数据集”按钮。
3. 填写数据集信息、参数名、参数值对应提取文件路径、文件格式、开始读取位置，以及对读取数据是否再次提取处理。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/dataset-file-add.png?fid=251751417168003306&fpt=OsOvMXMAWDJsg3ysvGZsdnCmn2DkRK9uXAnB3Iz7)
4. 配置完后可以在“预览”Tab页面中查看参数值。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/dataset-file-preview.png?fid=251751417168003308&fpt=nHVNVWIXj6Ek8iSEu39b7bK284jDvWz3TjTV16J6)
5. 点击“保存”完成操作。

***注意事项：***

- 确认提取文件开始行和列索引是否正确，默认从0开始。

### 3、添加Jdbc提取数据集

通过JDBC连接数据库提取数据并创建数据集，即根据一个SQL语句从数据源表中提取一组值作为数据集。

操作步骤:

1. 登录AngusTester，进入“数据”->“数据集”管理界面。
2. 点击添加静态数据集下拉操作中“Jdbc提取数据集”按钮。
3. 填写数据集信息、参数名、参数值对应提取数据源信息、查询(Select)语句，以及从查询结果中读取位置。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/dataset-jdbc-add.png?fid=251751417168003310&fpt=kcNyrK2cFhCgHTjtHQ3wqtjoghrMfUrn8un57Ymd)
4. 配置完后可以在“预览”Tab页面中查看参数值。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/dataset-jdbc-preview.png?fid=251751417168003312&fpt=ayGfSb6dNVlOAMDFdsIx3XULCsFVwP0WiU4uLi8x)
5. 点击“保存”完成操作。

### 4、编辑数据集

允许用户修改已存在数据集的名称、参数或提取规则等。适用于数据集信息需要更新或调整的情况下，确保数据集的有效性与准确性。

操作步骤:

1. 登录AngusTester，进入“数据”->“数据集”管理界面。
2. 在数据集列表中找到要编辑的数据集。
3. 点击“编辑”按钮，然后修改所需字段。
4. 点击“保存”完成操作。

### 5、删除数据集

删除单个数据集。当某个数据集不再需要或者需要进行清理时，可以使用此功能进行删除。

操作步骤:

1. 登录AngusTester，进入“数据”->“数据集”管理界面。
2. 在数据集列表中找到要删除的数据集，并点击“删除”按钮。
3. 系统将弹出确认对话框，提示您确认是否删除该数据集。
4. 确认删除操作，系统将提示确认以防误操作。

***注意事项:***

- 删除数据集将永久移除该执行记录，确认无误后再进行此操作。

### 6、批量删除数据集

通过此操作，可以一次性删除多个数据集。适合需要快速清理大量无用数据集的场景，节省时间与操作步骤。

操作步骤:

1. 登录AngusTester，进入“数据”->“数据集”管理界面。
2. 点击数据集列表右上方“批量删除”按钮。
3. 勾选需要删除的数据集，再点击确定，系统将弹出确认对话框，提示您确认是否删除该数据集。
4. 确认删除操作，系统将提示确认以防误操作。

***注意事项:***

- 删除数据集将永久移除该执行记录，确认无误后再进行此操作。

### 7、导出数据集

允许用户将选定的数据集导出为YAML文件格式，便于在其他项目或系统中使用和共享。

操作步骤:

1. 登录AngusTester，进入“数据”->“数据集”管理界面。
2. 在数据集列表中找到要导出的数据集，并点击“导出”按钮。
3. 系统将生成一个文件，保存到本地。

### 8、导出所有数据集

将系统中所有数据集导出为YAML文件格式，方便进行备份或迁移，确保数据的完整性与安全性。

1. 登录AngusTester，进入“数据”->“数据集”管理界面。
2. 点击数据集列表右上方“导出”按钮。
3. 系统将生成一个文件，保存到本地。

### 9、导入数据集

用于将之前导出的数据集文件导入到系统中，方便快速恢复或集成已有的数据集配置，提升工作效率。

操作步骤:

1. 登录AngusTester，进入“数据”->“数据集”管理界面。
2. 点击数据集列表右上方“导入”按钮。
3. 在弹窗里选择需要导入数据集文件。
4. 点击“确定”完成导入。

### 10、克隆数据集

创建现有数据集的副本，适合需要在不同场景中使用相似数据集的情况下，避免重复创建和配置。

操作步骤:

1. 登录AngusTester，进入“数据”->“数据集”管理界面。
2. 在数据集列表中找到要克隆的数据集，并点击“克隆”按钮。
3. 系统将自动复制出一个新的数据集，再根据需要快速修改数据集信息。

### 11、接口中参数化数据集

允许用户在接口中引用参数化数据集，使得接口的调用可以接受动态输入，增强接口的灵活性和复用性。

操作步骤:

1. 登录AngusTester，进入“接口”->“服务”管理界面。
2. 点击打开需要参数化数据集的接口，在接口调试页面“参数化”Tab中引入对应数据集，引入后及完成数据集参数化。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/dataset-ref-apis.png?fid=251751417168003316&fpt=zhOPAB8Wq2bDuCYWcUiobUW8yqJmQr2WzuoyyGq5)
3. 在接口参数值中通过`{参数名}`使用数据集参数变量。
   ![](https://bj-c1-prod-files.xcan.cloud/storage/pubapi/v1/file/dataset-ref-apis-assoc.png?fid=251751417168003314&fpt=QjZm9D1E4HNEgGsB4XModv9zyNfjEQa721Wta7pt)

***注意事项：***

- 接口只有引入已定义数据集才会生效，不建立引用关系直接使用数据集占位符不会生效。

### 12、场景中参数化数据集

允许用户在场景中引用参数化数据集，使得接口的调用可以接受动态输入，增强接口的灵活性和复用性。

操作步骤:

1. 登录AngusTester，进入“场景”管理界面。
2. 点击打开需要参数化数据集的场景，在场景执行配置中“数据集”配置选项中引入对应数据集，引入后及完成数据集参数化。
3. 在场景接口参数值中通过`{参数名}`使用数据集参数变量。

***注意事项：***

- 场景只有引入已定义数据集才会生效，不建立引用关系直接使用数据集占位符不会生效。
